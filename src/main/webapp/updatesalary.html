<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>注册</title>
        <link rel="stylesheet" type="text/css" href="css/common.css">
        <link rel="stylesheet" href="css/register.css">
		<!--导入jquery-->
		<script src="js/jquery-3.3.1.js"></script>
		<script src="js/getParameter.js"></script>

		<script>
			/*
			   表单校验:
			   	1.用户名:单词字符,长度8到20位
			   	2.密码:单词字符,长度8到20位
			   	3.email:邮件格式
			   	4姓名:非空
			   	5.手机号:手机号格式
			   	6:出生日期:非空
			   	7:验证码:非空
			 */
			//校驗用戶名
      		function checkeid() {
      			//获取输入框内容
				let eid = $("#eid").val();
				var reg_eid=/^\d{1,8}/;
				let flag = reg_eid.test(eid);
				if (flag){
					$("#eid").css("border","");

				}else{
					$("#eid").css("border","1px solid red");
				}
				return flag;
			}
			//校验姓名
			function checkename() {
				//获取输入框内容
				let ename = $("#ename").val();
				var reg_ename=/^\S/;
				let flag = reg_ename.test(ename);
				if (flag){
					$("#ename").css("border","");

				}else{
					$("#ename").css("border","1px solid red");
				}
				return flag;
			}



			//校验工龄
			function checkbasesalary(){
				let eworkyear = $("#basesalary").val();
				var reg_eworkyear=/^\d{1,8}$/;
				let flag = reg_eworkyear.test(eworkyear);
				if (flag){
					$("#basesalary").css("border","");
				}else {
					$("#basesalary").css("border","1px solid red");
				}
				return flag;
			}

			function checkwelfare(){
				let eworkyear = $("#welfare").val();
				var reg_eworkyear=/^\d{1,8}$/;
				let flag = reg_eworkyear.test(eworkyear);
				if (flag){
					$("#welfare").css("border","");
				}else {
					$("#welfare").css("border","1px solid red");
				}
				return flag;
			}

			function checkovertime(){
				let eworkyear = $("#overtime").val();
				var reg_eworkyear=/^\d{1,8}$/;
				let flag = reg_eworkyear.test(eworkyear);
				if (flag){
					$("#overtime").css("border","");
				}else {
					$("#overtime").css("border","1px solid red");
				}
				return flag;
			}



			$(function () {
				var eid=getParameter("eid");
				var sdate=getParameter("sdate");
				var ename=getParameter("ename");
				$("#ename").val(decodeURI(ename));
				$("#sdate").val(decodeURI(sdate));
				$.post("salary/findone",{eid:eid,sdate:sdate},function (db) {
					$("#eid").val(db.eid);
					$("#basesalary").val(db.basesalary);
					$("#welfare").val(db.welfare);
					$("#overtime").val(db.overtime);

				})

			})

			$(function () {
				$("#registerForm").submit(function () {
					//ajax请求校验表单内容
					if( checkeid() && checkename() &&checkbasesalary()&&checkovertime()&&
					checkwelfare()){
						$.post("salary/updatesalary",$(this).serialize(),function (data) {
								location.href="salary_list.html?eid="+data.eid;
						});

					}
					return false;
				});
				$("#eid").blur(checkeid);
				$("#ename").blur(checkename);
				$("#basesalary").blur(checkbasesalary);
				$("#welfare").blur(checkwelfare);
				$("#overtime").blur(checkovertime);



			})
		</script>

    </head>
	<body style=" ">
	<!--引入头部-->
	<div id="header"></div>
        <!-- 头部 end -->
    	<div class="rg_layout" >
    		<div class="rg_form clearfix" >
    			<div class="rg_form_left">

    			</div>
    			<div class="rg_form_center"  style="margin-top: 60px">

					<!--注册表单-->
    				<form id="registerForm" action="user">
						<!--提交处理请求的标识符-->
						<input type="hidden" name="action" value="register">
    					<table >

    						<tr>
								<span id="msg" style="color: red;"></span>
    							<td class="td_left">
    								<label for="eid">员工id</label>
    							</td>
    							<td class="td_right">
    								<input type="text" readonly id="eid" name="eid" placeholder="请输入员工id">
    							</td>
    						</tr>
    						<tr>
    							<td class="td_left">
    								<label for="ename">姓名</label>
    							</td>
    							<td class="td_right">
    								<input type="text" readonly id="ename" name="ename" placeholder="请输入姓名">
    							</td>
    						</tr>

							<tr>
								<td class="td_left">
									<label for="sdate">工资月份</label>
								</td>
								<td class="td_right" >
									<input type="text" readonly id="sdate" name="sdate" placeholder="年/月">
								</td>

							</tr>

							<tr>
								<td class="td_left">
									<label for="basesalary">基础工资</label>
								</td>
								<td class="td_right">
									<input type="text" id="basesalary"   name="basesalary" placeholder="">
								</td>
							</tr>

							<tr>
								<td class="td_left">
									<label for="welfare">福利</label>
								</td>
								<td class="td_right">
									<input type="text" id="welfare"  name="welfare" placeholder="">
								</td>
							</tr>




							<tr>
								<td class="td_left">
									<label for="overtime">加班时间</label>
								</td>
								<td class="td_right">
									<input type="text" id="overtime"  name="overtime" placeholder="">
								</td>
							</tr>



    						<tr>
    							<td class="td_left"> 
    							</td>
    							<td class="td_right check"> 
    								<input type="submit" class="submit" value="修改">
    							</td>
    						</tr>
    					</table>
    				</form>
    			</div>
    			<div class="rg_form_right">

    			</div>
    		</div>
    	</div>
        <!--引入尾部-->
    	<div id="footer"></div>
		<!--导入布局js，共享header和footer-->
		<script type="text/javascript" src="js/include.js"></script>
    	
    </body>
</html>